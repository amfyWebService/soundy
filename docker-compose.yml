version: "3.7"
services:
  mongo:
    image: mongo:latest
    # container_name: mongo
    restart: always
    ports:
      - "27017:27017"
    # env_file: mongo.env
  front:
    build: .
    # container_name: front
    restart: always
    network_mode: "bridge"
    environment: 
      - GATEWAY_URL=http://gateway:8080
  gateway:
    build: ../soundy_rest
    # container_name: gateway
    restart: always
    network_mode: "bridge"
    ports:
      - "8080:8080"
    env_file: gateway.env
  service:
    build: ../soundy_service
    # container_name: service
    restart: always
    links: 
      - mongo
    depends_on: 
      - mongo
    ports:
      - "8181:8080"
    env_file: service.env